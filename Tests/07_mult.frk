# Multiply two vaules using the repetitive sum algorithm

# assignments
ASSGN A      0x00
ASSGN B      0x01
ASSGN MULTHI 0x10
ASSGN MULTLO 0x11

# initialization
ZEROW
CPYWP MULTLO # MULTLO = 0
CPYWP MULTHI # MULTHI = 0
CPYPW IMM 20
CPYWP A      # A = 20
CPYPW IMM 40
CPYWP B      # B = 40

# loop
LABEL LOOP
CPYPW FLR B      # WREG = B
ADDWP FLR MULTLO 
CPYWP MULTLO     # MULTLO = MULTLO + B
GTIFC ADDCARRY   # if carry: goto ADDCARRY

LABEL CONTINUE
CPYPW FLR A
DECRW
CPYWP A        # --A
GTIFZ END      # if A==0: goto END
GOTOI LOOP

# add carry if overflow
LABEL ADDCARRY
CPYPW FLR MULTHI
INCRW
CPYWP MULTHI     # ++MULTHI
GOTOI CONTINUE

LABEL END
# debug code
CPYPW FLR MULTHI
CPYPW FLR MULTLO
LOOPF
